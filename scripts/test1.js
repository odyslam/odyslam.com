sampleData={
    "data": {
      "allSitePage": {
        "nodes": [
          {
            "isCreatedByStatefulCreatePages": false,
            "internal": {
              "content": null,
              "description": "7374ebf2-d961-52ee-92a2-c25e7cb387a9",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/blog/2021/seond-post/",
            "internalComponentName": "Componentblog/2021/seond-post/",
            "context": {
              "node": {
                "id": "431571f0-47ba-54a9-8ec8-0a76ac84bfaf",
                "frontmatter": {
                  excerpt: "This is a very nice excerpit about the article ai am so happy i amfhjfljaksdhfkljdsahfklajds ldsn afjshflkjdh jghjgho jkljkfj dfstj",
                  "category": "futurism",
                  "tags": [
                    "2021",
                    "1729",
                    "society"
                  ],
                  "title": "second post",
                  "date": "2020-04-11T00:00:00.000Z",
                  "coverImageLegend": null,
                  "coverImage": {
                    "childImageSharp": {
                      "gatsbyImageData": {
                        "images": {
                          "sources": [
                            {
                              "srcSet": "/static/fc2d391cdcf73db4feda5a48569af123/7a4d6/cloud-country.webp 480w,\n/static/fc2d391cdcf73db4feda5a48569af123/aa266/cloud-country.webp 960w,\n/static/fc2d391cdcf73db4feda5a48569af123/dcb8b/cloud-country.webp 1920w",
                              "sizes": "(min-width: 1920px) 1920px, 100vw",
                              "type": "image/webp"
                            }
                          ],
                          "fallback": {
                            "src": "/static/fc2d391cdcf73db4feda5a48569af123/3a072/cloud-country.jpg",
                            "sizes": "(min-width: 1920px) 1920px, 100vw",
                            "srcSet": "/static/fc2d391cdcf73db4feda5a48569af123/69a11/cloud-country.jpg 480w,\n/static/fc2d391cdcf73db4feda5a48569af123/f9dab/cloud-country.jpg 960w,\n/static/fc2d391cdcf73db4feda5a48569af123/3a072/cloud-country.jpg 1920w"
                          }
                        },
                        "backgroundColor": "#7888b8",
                        "height": 944,
                        "layout": "constrained",
                        "width": 1920
                      }
                    }
                  }
                },
                "timeToRead": 7
              }
            }
          },
          {
            "isCreatedByStatefulCreatePages": false,
            "internal": {
              "content": null,
              "description": "7374ebf2-d961-52ee-92a2-c25e7cb387a9",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/blog/2021/how-to-start-a-cloud-country/",
            "internalComponentName": "Componentblog/2021/how-to-start-a-cloud-country/",
            "context": {
              "node": {
                "id": "8d02600a-24a8-5cf8-8101-4af1068c63e5",
                "frontmatter": {
                  excerpt: "This is a very nice excerpit about the article ai am so happy i amfhjfljaksdhfkljdsahfklajds ldsn afjshflkjdh jghjgho jkljkfj dfstj",
                  "category": "futurism",
                  "tags": [
                    "2021",
                    "1729",
                    "society"
                  ],
                  "title": "How to Start a new Country, a Review",
                  "date": "2021-04-11",
                  "coverImageLegend": "Cloud City from [Bioshock Infinite](https://bioshock.fandom.com/wiki/Columbia)",
                  "coverImage": {
                    "childImageSharp": {
                      "gatsbyImageData": {
                        "images": {
                          "sources": [
                            {
                              "srcSet": "/static/fc2d391cdcf73db4feda5a48569af123/7a4d6/cloud-country.webp 480w,\n/static/fc2d391cdcf73db4feda5a48569af123/aa266/cloud-country.webp 960w,\n/static/fc2d391cdcf73db4feda5a48569af123/dcb8b/cloud-country.webp 1920w",
                              "sizes": "(min-width: 1920px) 1920px, 100vw",
                              "type": "image/webp"
                            }
                          ],
                          "fallback": {
                            "src": "/static/fc2d391cdcf73db4feda5a48569af123/3a072/cloud-country.jpg",
                            "sizes": "(min-width: 1920px) 1920px, 100vw",
                            "srcSet": "/static/fc2d391cdcf73db4feda5a48569af123/69a11/cloud-country.jpg 480w,\n/static/fc2d391cdcf73db4feda5a48569af123/f9dab/cloud-country.jpg 960w,\n/static/fc2d391cdcf73db4feda5a48569af123/3a072/cloud-country.jpg 1920w"
                          }
                        },
                        "backgroundColor": "#7888b8",
                        "height": 944,
                        "layout": "constrained",
                        "width": 1920
                      }
                    }
                  }
                },
                "timeToRead": 7
              }
            }
          },
          {
            "isCreatedByStatefulCreatePages": true,
            "internal": {
              "content": null,
              "description": "d48d1c52-fe48-53cb-8f08-aa4b47dde5a5",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/dev-404-page/",
            "internalComponentName": "Component/dev-404-page/",
            "context": {
              "node": null
            }
          },
          {
            "isCreatedByStatefulCreatePages": true,
            "internal": {
              "content": null,
              "description": "80456654-8e91-5765-9d57-16fd596abf8f",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/404/",
            "internalComponentName": "Component/404/",
            "context": {
              "node": null
            }
          },
          {
            "isCreatedByStatefulCreatePages": true,
            "internal": {
              "content": null,
              "description": "80456654-8e91-5765-9d57-16fd596abf8f",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/",
            "internalComponentName": "ComponentIndex",
            "context": {
              "node": null
            }
          },
          {
            "isCreatedByStatefulCreatePages": true,
            "internal": {
              "content": null,
              "description": "80456654-8e91-5765-9d57-16fd596abf8f",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/blog/",
            "internalComponentName": "Component/blog/",
            "context": {
              "node": null
            }
          },
          {
            "isCreatedByStatefulCreatePages": true,
            "internal": {
              "content": null,
              "description": "f795702c-a3b8-5a88-88ee-5d06019d44fa",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/404.html",
            "internalComponentName": "Component/404.html",
            "context": {
              "node": null
            }
          },
          {
            "isCreatedByStatefulCreatePages": true,
            "internal": {
              "content": null,
              "description": "13b3ff54-0b1a-59c5-9562-146323896840",
              "ignoreType": null,
              "mediaType": null
            },
            "path": "/about/",
            "internalComponentName": "Component/about/",
            "context": {
              "node": null
            }
          }
        ]
      }
    },
    "extensions": {}
  }

  exampleNode = { id: "eg", label: "tecasdfasdfdsfdsfhnology", title: "node 5 tootip text", level: 6 }
  
  const htmlTitle = (html) => {
    const container = document.createElement("div");
    container.innerHTML = html;
    return container;
  }
  


let categoriesDepth= {}
let previousPostByCategory={}
let graphNodes = [];
let graphEdges = [];

const { nodes } = sampleData.data.allSitePage;
nodes.forEach(node=>{
    let id = node.id;
    let path = node.path
    if(path.includes('blog') && path!='/blog/'){
        console.log(path);
        let {category, tags, title, date, coverImage, excerpt} = node.context.node.frontmatter
        console.log(date)
        let coverImgSrc = coverImage.childImageSharp.gatsbyImageData.images.fallback.src;
        let timeToRead = node.context.node.timeToRead;
        let rawhtml = `<div><h3 class="mt-0 tracking-widest text-center text-black" >${title}--</h3> \
        <pclass="text-black mx-5 font-serif" >Reading ‚è∞ ${timeToRead}m | Date üìÖ ${date}</p> \
        <p class="text-black mx-5 font-serif">${excerpt}<p></div>`
        if(categoriesDepth[category] == null){
          categoriesDepth[category] = 0;
          previousPostByCategory[category] = category;
          console.log(previousPostByCategory)
        }
        else{
          categoriesDepth[category] = categoriesDepth[category] + 1 ;
          console.log("Category found!")
        }
        let level = categoriesDepth[category] + 1;
        let graphNode = {id: path, label: title, title: rawhtml, level: level, margin:10, shape: "circularImage", image: coverImgSrc }
        let graphEdge = {from: previousPostByCategory[category], to: path}
        previousPostByCategory[category] = path;
        graphNodes.push(graphNode);
        graphEdges.push(graphEdge);
    }
    // for every category ,create a list of posts which one should point to another. 
})

console.log(graphNodes, graphEdges)
console.log(categoriesDepth)
